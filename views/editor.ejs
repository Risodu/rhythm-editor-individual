<script defer src="/game.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/1.0.0/anime.min.js"></script>
<script defer src="/bgEffect.js"></script>
<div id="game" class="row container">
    <div class="col-4">
        <ul class="list-group">
            <% levels.forEach(level => { %>
                <a class="list-group-item list-group-item-action" href="/editor/<%= level %> "><%- level %> </a>
            <% }) %>
        </ul>
    </div>
    <div class="col-8">
        <h1>EDITOR</h1>
        <div class="visualizer">
            <div class="currentTime"></div>
            <div class="beats" id="beats">
                <!-- <div class="beat" style="left: 100px;"></div> -->
            </div>
        </div>
        <p><%- zadanie %> </p>
        <% if (testOutput) { %>
            <div class="alert" role="alert">
                <%- testOutput.status %> 
            </div>
        <% } %>
        <button class="btn btn-primary" id="play">Zacat</button>
        <button class="btn btn-danger d-none" id="stop">Stop</button>
        <button class="btn btn-success d-none" id="submit">Submit</button>
        <div class="card">
            <pre><code class="language-python" id="code"> </code></pre>
        </div>
    </div>
    <canvas id="c"></canvas>
</div>

<script>
    var levelData = <%- data %>;

    var upgrades = <%- JSON.stringify(user.upgrades) %>;
</script>

<style>
    .visualizer{
        height: 2rem;
        background-color: var(--secondary);
        margin: 0;
        box-sizing: content-box;
        position: relative;
        border: 1px solid black;
    }
    .row{
        margin: auto;
    }
    .currentTime {
        position: absolute;
        background-color: red;
        width: 3px;
        height: 120%;
        left: 64px;
        top: -10%;
    }
    .beat{
        height: 35px;
        width: 50px;
        background-color: blue;
        position: absolute;
    }
    .beats {
        position: relative;
        display: flex;

    }
    #c {
        position: fixed;
        z-index: -1;
        width: 100vw;
        height: 100vh;
        top: 0;
        left: 0;
        opacity: 0.6;
        padding: 0;
    }
</style>